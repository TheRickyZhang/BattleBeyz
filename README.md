# BattleBeyz

BattleBeyz is the first 3D Beyblade game with accurate spinning top physics.

I also wanted to learn from the process of creating a game from scratch, so everything is written in C++ (OpenGL / ImGui) with no physics libraries. Any collaboration or feedback is welcome!

## Features (So far!)

- 3D Camera Control and Rendering
- Realistic Beyblade Physics (- some bugs)
- Centralized Game Engine and States
- Profile and Input Manager
- Texture, Mesh, Lighting/Shading
- Rendering with OpenGL and ImGui
- Logging and Debug Mode
- Font rendering with FreeType

# Coming Soon
- Save states
- Mesh import
- Pre-match selection screen and reset

# Installation Instructions for BattleBeyz

Follow these steps to clone, build, and run BattleBeyz using Visual Studio 2022:

## 1. Clone the Repository
1. Open your terminal (Command Prompt, PowerShell, or your preferred terminal).
2. Navigate to the folder where you'd like to store the project.
3. Run the following command to clone the repository:
   ```bash
   git clone https://github.com/TheRickyZhang/BattleBeyz
   ```
## 2. Prepare the Build Environment
1. **Remove any existing build folder**:
   - For PowerShell:
     ```powershell
     Remove-Item -Recurse -Force build
     ```
   - For Linux:
     ```bash
     rm -rf build
     ```
2. **Run CMake** to generate the Visual Studio solution and project files:
   ```bash
   cmake -S . -B build
   ```
   - **Note**: Carefully read the output to ensure that CMake runs without errors and detects the correct version of Visual C++.
## 3. Build the Project in Visual Studio
1. Open Visual Studio 2022.
2. Load the solution file generated by CMake:
   - From the menu, select **File -> Open -> Project/Solution**.
   - Navigate to the `build` folder (e.g., `D:\BattleBeyz\build`) and select `BattleBeyz.sln`.
3. Choose the desired build configuration:
   - **Debug** for development and debugging.
   - **Release** for optimized performance.
4. Build the solution:
   - From the menu, go to **Build -> Build Solution** (or press `Ctrl+Shift+B`).

## 4. Run the Application
- To debug the application:
  - Press `F5` or go to **Debug -> Start Debugging**.
- To run the application without debugging:
  - Press `Ctrl+F5` or go to **Debug -> Start Without Debugging**.

---

**Note**: Ensure that your system has the required dependencies, such as CMake (version 3.30.2 or later) and the correct Visual Studio C++ environment.

# Installation and Setup Guide for Dependencies

## 1. Installing vcpkg
vcpkg is a package manager for C++ libraries. Follow these steps to install and configure it:

1. Open your terminal.
2. Clone the vcpkg repository into your absolute root directory (or another suitable location):
   ```sh
   git clone https://github.com/microsoft/vcpkg.git
   cd vcpkg
   ```
3. Bootstrap vcpkg:
   ```sh
   .ootstrap-vcpkg.bat
   ```
   This creates the `vcpkg.exe` file in the root of the `vcpkg` folder.

4. Add vcpkg to your PATH:
   ```sh
   $env:PATH += ";C:\vcpkg"
   ```

5. Integrate vcpkg with CMake:
   ```sh
   .
cpkg integrate install
   ```
   This enables automatic CMake toolchain configuration.

## 2. Installing Required Libraries
Install the required libraries, ensuring they are built as **static** versions:

```sh
.
cpkg install glfw3:x64-windows-static
.
cpkg install glew:x64-windows-static
.
cpkg install glm:x64-windows-static
.
cpkg install freetype:x64-windows-static
```

## 3. Setting Up the Project
Ensure your `vcpkg` folder is placed the corresponding location to your `CMakeLists.txt` to include the toolchain:

```cmake
set(CMAKE_TOOLCHAIN_FILE "${CMAKE_SOURCE_DIR}/vcpkg/scripts/buildsystems/vcpkg.cmake" CACHE STRING "Vcpkg toolchain file")
set(CMAKE_PREFIX_PATH "${CMAKE_SOURCE_DIR}/vcpkg/installed/x64-windows-static" CACHE PATH "Path to vcpkg installed packages")
```

## 4. Libraries Included in `lib` Folder
The following libraries are prebuilt and included in the `lib` folder:
- **ImGui**: Version `1.90.8`
- **stb_image**: Version `v0.8`
- **tinyobjloader**: Latest release.

To manually download and build these:
```sh
cd lib
curl -LO https://download.savannah.gnu.org/releases/freetype/freetype-2.13.2.tar.gz
tar -xzf freetype-2.13.2.tar.gz
curl -LO https://github.com/ocornut/imgui/archive/refs/tags/v1.90.8.zip
unzip v1.90.8.zip
curl -LO https://github.com/nothings/stb/archive/refs/tags/v0.8.zip
unzip v0.8.zip
curl -O https://raw.githubusercontent.com/tinyobjloader/tinyobjloader/release/tiny_obj_loader.h
```

## 5. Final Project Folder Structure
Your project should look like this after installation:
```
Project Root/
├── src/                     # Source files
├── lib/                     # Local libraries (ImGui, stb, tinyobjloader)
│   ├── imgui-1.90.8/
│   ├── stb/
│   ├── tiny_obj_loader.h
├── vcpkg/                   # vcpkg package manager
├── CMakeLists.txt           # CMake build file
└── assets/                  # Game assets like textures
```

## 6. Ensuring Static Builds
To avoid issues with mixed library types:
1. Ensure all libraries are installed with the `x64-windows-static` triplet.
2. Use this command to list all installed packages and confirm:
   ```sh
   .
cpkg list
   ```
3. Verify your `CMakeLists.txt` includes:
   ```cmake
   set(CMAKE_MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>DLL")
   ```

## 7. Running the Project
Once set up, build your project with:
```sh
cmake -S . -B build
cmake --build build
``` 

